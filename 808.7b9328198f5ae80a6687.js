"use strict";(self.webpackChunkliga_master=self.webpackChunkliga_master||[]).push([[808],{808:(Y,h,r)=>{r.r(h),r.d(h,{TeamsModule:()=>I});var Z=r(4466),c=r(8583),d=r(5483),e=r(7716),g=r(9344),m=r(7957),s=r(665);const b=["form"];function v(i,n){if(1&i&&(e.TgZ(0,"option",9),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}let u=(()=>{class i{constructor(t,o,a){this.connectionService=t,this.toastService=o,this.router=a,this.team={},this.leagues=[]}ngOnInit(){this.getLeagues()}getLeagues(){this.connectionService.get(d.M.LEAGUES).subscribe(t=>{t.length?this.leagues=t.map(function(o){return{id:o.Identificador,name:o["Nombre De La Liga"],image:o["Logo de la Liga"]}}):this.toastService.error("Ha ocurrido un error cargando las ligas")},t=>{this.toastService.error("Ha ocurrido un error cargando las ligas")})}buildJSON(){return{"Nombre del equipo":this.team.name,"Logo del Equipo":"https://robohash.org/velitfugitiure.png?size=250x250&set=set1",Liga:this.team.league}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.M),e.Y36(g._W),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-teams-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(b,5),2&t){let a;e.iGM(a=e.CRH())&&(o.form=a.first)}},decls:18,vars:4,consts:[[1,"form-container"],["form","ngForm"],[1,"d-flex","flex-column","flex-fill"],[1,"form-group","flex-fill"],["name","name","type","text","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","description","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["name","liga","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","selected",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0,1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"label"),e._uU(5,"Nombre"),e.qZA(),e.TgZ(6,"input",4),e.NdJ("ngModelChange",function(l){return o.team.name=l}),e.qZA(),e.qZA(),e.TgZ(7,"div",3),e.TgZ(8,"label"),e._uU(9,"Descripci\xf3n"),e.qZA(),e.TgZ(10,"textarea",5),e.NdJ("ngModelChange",function(l){return o.team.description=l}),e.qZA(),e.qZA(),e.TgZ(11,"div",3),e.TgZ(12,"label"),e._uU(13,"Liga"),e.qZA(),e.TgZ(14,"select",6),e.NdJ("ngModelChange",function(l){return o.team.league=l}),e.TgZ(15,"option",7),e._uU(16,"..."),e.qZA(),e.YNc(17,v,2,2,"option",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngModel",o.team.name),e.xp6(4),e.Q6J("ngModel",o.team.description),e.xp6(4),e.Q6J("ngModel",o.team.league),e.xp6(3),e.Q6J("ngForOf",o.leagues))},directives:[s._Y,s.JL,s.F,s.Fj,s.Q7,s.JJ,s.On,s.EJ,s.YN,s.Kr,c.sg],styles:[""]}),i})();var p=r(7368),T=r(8993);let _=(()=>{class i{constructor(t,o,a,l){this.connectionService=t,this.toastService=o,this.router=a,this.route=l,this.canSave=!1,this.route.params.subscribe(f=>{this.id=f.id})}ngOnInit(){this.getTeam()}ngAfterViewInit(){this.formComponent.form.valueChanges.subscribe(t=>{this.canSave=this.formComponent.form.valid})}getTeam(){this.connectionService.get(d.M.TEAMS+this.id).subscribe(o=>{o.id?this.formComponent.team={id:o.id,name:o["Nombre del equipo"],logo:o["Logo del Equipo"],league:o.Liga}:this.toastService.error(o.detail)},o=>{this.toastService.error(o)})}editTeam(){this.connectionService.put(d.M.TEAMS+this.id,this.formComponent.buildJSON()).subscribe(o=>{o.id?(this.toastService.success("El equipo se ha editado satisfactoriamente"),this.connectionService.back()):this.toastService.error("Ha ocurrido un problema editando el equipo")},o=>{this.toastService.error("Ha ocurrido un problema editando el equipo")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.M),e.Y36(g._W),e.Y36(m.F0),e.Y36(m.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-teams-edit"]],viewQuery:function(t,o){if(1&t&&e.Gf(u,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formComponent=a.first)}},decls:7,vars:1,consts:[["title","Editar Equipo"],["routerLink","../..",1,"btn","btn-light","mr-2"],[1,"btn","btn-primary","primary",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-toolbar",0),e.TgZ(1,"button",1),e._uU(2,"Cancelar"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.editTeam()}),e._uU(4,"Editar"),e.qZA(),e.qZA(),e.TgZ(5,"app-container"),e._UZ(6,"app-teams-form"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("disabled",!o.canSave))},directives:[p.n,m.rH,T.e,u],styles:[""]}),i})(),q=(()=>{class i{constructor(t,o,a){this.connectionService=t,this.toastService=o,this.router=a,this.canSave=!1}ngOnInit(){}ngAfterViewInit(){this.formComponent.form.valueChanges.subscribe(t=>{this.canSave=this.formComponent.form.valid})}addTeam(){this.connectionService.post(d.M.TEAMS,this.formComponent.buildJSON()).subscribe(t=>{t.id?(this.toastService.success("Se ha creado el equipo satisfactoriamente"),this.connectionService.back()):this.toastService.error("Ha ocurrido un problema creando el equipo")},t=>{this.toastService.error("Ha ocurrido un problema creando el equipo")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.M),e.Y36(g._W),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-teams-add"]],viewQuery:function(t,o){if(1&t&&e.Gf(u,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formComponent=a.first)}},decls:7,vars:1,consts:[["title","Crear equipo"],["routerLink","..",1,"btn","btn-light","mr-2"],[1,"btn","btn-primary","primary",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-toolbar",0),e.TgZ(1,"button",1),e._uU(2,"Cancelar"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.addTeam()}),e._uU(4,"Crear"),e.qZA(),e.qZA(),e.TgZ(5,"app-container"),e._UZ(6,"app-teams-form"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("disabled",!o.canSave))},directives:[p.n,m.rH,T.e,u],styles:[""]}),i})();var A=r(8424),C=r(4717),x=r(6643);function y(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr",31),e.TgZ(1,"td",32),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).selectTeam(l)}),e.TgZ(2,"div",23),e._UZ(3,"img",33),e.TgZ(4,"div",25),e.TgZ(5,"div"),e._uU(6),e.qZA(),e.TgZ(7,"div",26),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"td",34),e.TgZ(10,"div",23),e.TgZ(11,"button",35),e.TgZ(12,"span"),e._UZ(13,"i",36),e.qZA(),e.qZA(),e.TgZ(14,"button",37),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).deleteTarget(l.id)}),e.TgZ(15,"span"),e._UZ(16,"i",38),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=n.$implicit;e.xp6(3),e.Q6J("src",t.logo,e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.league),e.xp6(3),e.MGl("routerLink","edit/",t.id,"")}}function S(i,n){if(1&i&&(e.TgZ(0,"table",29),e.TgZ(1,"tbody"),e.YNc(2,y,17,4,"tr",30),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.searchWord.length?t.teamsAuxSearch:t.teams)}}function L(i,n){1&i&&e._UZ(0,"app-loading")}function M(i,n){1&i&&(e.TgZ(0,"app-empty-screen",39),e.ynx(1,40),e.TgZ(2,"span"),e._UZ(3,"i",41),e.qZA(),e.BQk(),e.ynx(4,42),e.TgZ(5,"button",43),e._uU(6,"Crear equipo"),e.qZA(),e.BQk(),e.qZA())}function J(i,n){1&i&&(e.TgZ(0,"app-empty-screen",44),e.ynx(1,40),e.TgZ(2,"span"),e._UZ(3,"i",45),e.qZA(),e.BQk(),e.qZA())}function E(i,n){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"td",51),e.TgZ(2,"div",23),e._UZ(3,"img",33),e.TgZ(4,"div",25),e.TgZ(5,"div"),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.xp6(3),e.Q6J("src",t.avatar,e.LSH),e.xp6(3),e.Oqu(t.name)}}function U(i,n){if(1&i&&(e.TgZ(0,"table",49),e.TgZ(1,"tbody"),e.YNc(2,E,7,2,"tr",50),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.selectedTeam.players)}}function N(i,n){if(1&i&&(e.TgZ(0,"div",46),e.TgZ(1,"label"),e._uU(2,"Listado de jugadores"),e.qZA(),e.TgZ(3,"app-scroll-view",47),e.YNc(4,U,3,1,"table",48),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("heightStatic",400),e.xp6(1),e.Q6J("ngIf",!t.loading&&(null==t.selectedTeam.players?null:t.selectedTeam.players.length))}}const F=function(i){return{"loading-data":i}},Q=[{path:"",component:(()=>{class i{constructor(t,o,a){this.connectionService=t,this.toastService=o,this.router=a,this.teams=[],this.teamsAuxSearch=[],this.leagues=[],this.players=[],this.loading=!1,this.selectedTeam={},this.searchWord=""}ngOnInit(){this.getPlayers(),this.getLeagues()}getPlayers(){this.loading=!0,this.connectionService.get(d.M.PLAYERS).subscribe(t=>{t.length?this.players=t.map(function(o){return{id:o.id,name:o["Nombre del Jugador"],avatar:o.Avatar,team:o.teamId}}).reverse():this.loading=!1},t=>{this.loading=!1,this.toastService.error("Ha ocurrido un error cargando los jugadores")})}getLeagues(){this.connectionService.get(d.M.LEAGUES).subscribe(t=>{t.length?(this.leagues=t.map(function(o){return{id:o.Identificador,name:o["Nombre De La Liga"],image:o["Logo de la Liga"]}}),this.getTeams()):this.loading=!1},t=>{this.loading=!1,this.toastService.error("Ha ocurrido un error cargando las ligas")})}getTeams(){this.connectionService.get(d.M.TEAMS).subscribe(t=>{this.loading=!1,t.length&&(this.teams=t.map(o=>({id:o.id,name:o["Nombre del equipo"],logo:o["Logo del Equipo"],league:this.getLeagueNameById(o.Liga)})).reverse())},t=>{this.loading=!1,this.toastService.error("Ha ocurrido un error cargando los equipos")})}getLeagueNameById(t){return this.leagues[this.leagues.map(o=>o.id).indexOf(t)].name}deleteTarget(t){this.delTargetId=t}deleteLeague(){this.connectionService.delete(d.M.TEAMS+this.delTargetId).subscribe(o=>{this.toastService.success("El equipo se ha eliminado satisfactoriamente"),this.getTeams()},o=>{this.toastService.error(o)})}selectTeam(t){this.selectedTeam=t,this.selectedTeam.players=this.players.filter(o=>o.team==t.id)}filterSearch(){this.teamsAuxSearch=this.teams.filter(t=>-1!=t.name.toLowerCase().indexOf(this.searchWord.toLowerCase())||-1!=t.league.toLowerCase().indexOf(this.searchWord.toLowerCase()))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.M),e.Y36(g._W),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-teams-list"]],decls:49,vars:12,consts:[["title","Equipos","subtitle","Listado de equipos disponibles","icon","bi-diagram-3-fill"],["routerLink","add",1,"btn","btn-outline-primary"],[1,"d-flex","justify-content-end","search-input"],[1,"form-group"],["name","search","type","text","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-container",3,"ngClass"],["class","table table-hover",4,"ngIf"],[4,"ngIf"],["class","flex-fill","title","No hay Equipos disponibles","subtitle","Agregue Equipos para poder interactuar con los jugadores",4,"ngIf"],["class","flex-fill","title","No se encontraron equipos","subtitle","Modifique el t\xe9rmino para obtener un mejor resultado",4,"ngIf"],["id","deleteModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-light"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],["id","viewModal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"d-flex"],["alt","",1,"image-view-modal",3,"src"],[1,"d-flex","flex-column","my-auto"],[1,"text-muted"],["class","d-flex flex-column mt-3",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],[1,"table","table-hover"],["class","table-item",4,"ngFor","ngForOf"],[1,"table-item"],["data-toggle","modal","data-target","#viewModal",2,"width","100%",3,"click"],[1,"image-table",3,"src"],[2,"vertical-align","middle"],[1,"btn","btn-link","my-auto",3,"routerLink"],[1,"bi","bi-pencil-square"],["data-toggle","modal","data-target","#deleteModal",1,"btn","btn-link","my-auto",3,"click"],[1,"bi","bi-archive-fill","text-danger"],["title","No hay Equipos disponibles","subtitle","Agregue Equipos para poder interactuar con los jugadores",1,"flex-fill"],["icon",""],[1,"bi","bi-diagram-3-fill","text-secondary",2,"font-size","64px"],["button",""],["type","button","routerLink","add/",1,"btn","btn-outline-primary"],["title","No se encontraron equipos","subtitle","Modifique el t\xe9rmino para obtener un mejor resultado",1,"flex-fill"],[1,"bi","bi-emoji-frown","text-secondary",2,"font-size","64px"],[1,"d-flex","flex-column","mt-3"],[3,"heightStatic"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[2,"width","100%"]],template:function(t,o){1&t&&(e.TgZ(0,"app-toolbar",0),e.TgZ(1,"button",1),e._uU(2," Agregar Equipo "),e.qZA(),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(l){return o.searchWord=l})("ngModelChange",function(){return o.filterSearch()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"app-container"),e.TgZ(7,"div",5),e.YNc(8,S,3,1,"table",6),e.YNc(9,L,1,0,"app-loading",7),e.qZA(),e.YNc(10,M,7,0,"app-empty-screen",8),e.YNc(11,J,4,0,"app-empty-screen",9),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.TgZ(16,"h5",14),e._uU(17,"Eliminar Equipo"),e.qZA(),e.TgZ(18,"button",15),e.TgZ(19,"span",16),e._uU(20,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",17),e._uU(22," \xbfEst\xe1 seguro de querer eliminar este equipo? "),e.qZA(),e.TgZ(23,"div",18),e.TgZ(24,"button",19),e._uU(25,"Cancelar"),e.qZA(),e.TgZ(26,"button",20),e.NdJ("click",function(){return o.deleteLeague()}),e._uU(27,"Eliminar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",21),e.TgZ(29,"div",22),e.TgZ(30,"div",12),e.TgZ(31,"div",13),e.TgZ(32,"h5",14),e._uU(33,"Vista Previa"),e.qZA(),e.TgZ(34,"button",15),e.TgZ(35,"span",16),e._uU(36,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",17),e.TgZ(38,"div",23),e._UZ(39,"img",24),e.TgZ(40,"div",25),e.TgZ(41,"div"),e._uU(42),e.qZA(),e.TgZ(43,"div",26),e._uU(44),e.qZA(),e.qZA(),e.qZA(),e.YNc(45,N,5,2,"div",27),e.qZA(),e.TgZ(46,"div",18),e.TgZ(47,"button",28),e._uU(48,"Aceptar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngModel",o.searchWord),e.xp6(2),e.Q6J("ngClass",e.VKq(10,F,o.loading)),e.xp6(1),e.Q6J("ngIf",!o.loading&&o.teams.length),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading&&!o.teams.length),e.xp6(1),e.Q6J("ngIf",o.searchWord.length&&!o.loading&&!o.teamsAuxSearch.length),e.xp6(28),e.Q6J("src",o.selectedTeam.logo,e.LSH),e.xp6(3),e.Oqu(o.selectedTeam.name),e.xp6(2),e.Oqu(o.selectedTeam.league),e.xp6(1),e.Q6J("ngIf",null==o.selectedTeam.players?null:o.selectedTeam.players.length))},directives:[p.n,m.rH,s.Fj,s.JJ,s.On,T.e,c.mk,c.O5,c.sg,A.N,C.s,x.W],styles:[".image-table[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:500px;background-color:#e0e4ed;margin-right:16px}.image-view-modal[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:500px;background-color:#e0e4ed;margin-right:16px}"]}),i})()},{path:"add",component:q},{path:"edit/:id",component:_}];let O=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.Bz.forChild(Q)],m.Bz]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.ez,O,Z.m,s.u5]]}),i})()}}]);